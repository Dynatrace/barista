@import '../core/theming/theming';
@import '../core/style/variables';

@mixin dt-button-theme($theme) {
  $is-dark: map-get($theme, 'is-dark');
  @if ($is-dark == true) {
    .dt-button,
    .dt-icon-button,
    &.dt-context-menu-panel .dt-button,
    &.dt-context-menu-panel .dt-icon-button {
      @include dt-button-theme-variants($theme);
    }
  }
  @else {
    .dt-button,
    .dt-icon-button {
      @include dt-button-theme-variants($theme);
    }
  }
}

@mixin dt-button-theme-variants($theme) {
  $palette-names: 'main', 'warning', 'cta';
  $default-palette: 'main';

  @each $name in $palette-names {
    $is-dark: map-get($theme, 'is-dark');
    $palette: map-get($theme, $name);
    $default-color: dt-color($palette, 'default');
    $hover-color: dt-color($palette, 'hover');
    $active-color: dt-color($palette, 'active');

    $namespace: '';
    @if $name != $default-palette {
      $namespace: '.dt-#{$name}';
    }

    ////////////////////////////
    // PRIMARY
    ////////////////////////////
    &#{$namespace}.dt-button-primary {
        background: $default-color;
        border-color: $default-color;
        color: #fff;
    }
    &#{$namespace}.dt-button-primary:hover:not([disabled]) {
      background: $hover-color;
      border-color: $hover-color;
      color: #fff;
    }
    &#{$namespace}.dt-button-primary:active:not([disabled]) {
      background: $active-color;
      border-color: $active-color;
      color: #fff;
    }
    &#{$namespace}.dt-button-primary .dt-icon svg {
      fill: #fff;
    }

    @if ($is-dark == true) {
      &#{$namespace}.dt-button-primary,
      &#{$namespace}.dt-button-primary:hover:not([disabled]),
      &#{$namespace}.dt-button-primary:active:not([disabled]) {
        border-color: #fff;
      }
      &#{$namespace}.dt-button-primary[disabled] {
        background: rgba(255, 255, 255, 0.2);
        border-color: rgba(255, 255, 255, 0.2);
        color: rgba(255, 255, 255, 0.6);
      }
      &#{$namespace}.dt-button-primary[disabled] .dt-icon svg {
        fill: rgba(255, 255, 255, 0.6);
      }
    }
    @else {
      &#{$namespace}.dt-button-primary[disabled] {
        background: $disabledcolor;
        border-color: $disabledcolor;
        color: #fff;
      }
    }

    ////////////////////////////
    // SECONDARY
    ////////////////////////////
    &#{$namespace}.dt-button-secondary {
      background: #fff;
      border-color: $default-color;
      color: $default-color;
    }
    &#{$namespace}.dt-button-secondary:hover:not([disabled]) {
      background: $gray-100;
      border-color: $hover-color;
      color: $hover-color;
    }
    &#{$namespace}.dt-button-secondary:active:not([disabled]) {
      background: $gray-100;
      border-color: $active-color;
      color: $active-color;
    }
    &#{$namespace}.dt-button-secondary .dt-icon svg {
      fill: $default-color;
    }
    &#{$namespace}.dt-button-secondary:hover:not([disabled]) .dt-icon svg {
      fill: $hover-color;
    }
    &#{$namespace}.dt-button-secondary:active:not([disabled]) .dt-icon svg {
      fill: $active-color;
    }
    &#{$namespace}.dt-button-secondary[disabled] .dt-icon svg {
      fill: $disabledcolor;
    }

    @if $is-dark == true {
      &#{$namespace}.dt-button-secondary,
      &#{$namespace}.dt-button-secondary[disabled] {
        background: transparent;
        color: #fff;
      }
      &#{$namespace}.dt-button-secondary:hover:not([disabled]) {
        background: rgba(255, 255, 255, 0.2);
        color: #fff;
      }
      &#{$namespace}.dt-button-secondary:active:not([disabled]) {
        background: rgba(255, 255, 255, 0.3);
        color: #fff;
      }
      &#{$namespace}.dt-button-secondary[disabled] {
        border-color: rgba(255, 255, 255, 0.2);
        color: rgba(255, 255, 255, 0.6);
      }
      &#{$namespace}.dt-button-secondary .dt-icon svg {
        fill: #fff;
      }
      &#{$namespace}.dt-button-secondary:hover:not([disabled]) .dt-icon svg {
        fill: #fff;
      }
      &#{$namespace}.dt-button-secondary:active:not([disabled]) .dt-icon svg {
        fill: #fff;
      }
      // Main does not have the main color as a border
      // so we have to specifiy it differently
      @if $name == 'main' {
        &#{$namespace}.dt-button-secondary,
        &#{$namespace}.dt-button-secondary:hover:not([disabled]) {
          border-color: #fff;
          color: $gray-100;
        }
        &#{$namespace}.dt-button-secondary .dt-icon svg,
        &#{$namespace}.dt-button-secondary:hover:not([disabled]) .dt-icon svg {
          fill: $gray-100;
        }
        &#{$namespace}.dt-button-secondary:active:not([disabled]) {
          border-color: #fff;
          color: #fff;
        }
        &#{$namespace}.dt-button-secondary:active:not([disabled]) .dt-icon svg {
          fill: #fff;
        }
      }
    }
    @else {
      &#{$namespace}.dt-button-secondary[disabled] {
        background: #fff;
        border-color: $disabledcolor;
        color: $disabledcolor;
      }
    }
  }
}
