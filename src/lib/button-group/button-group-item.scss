@import '../core/style/variables';

@mixin boxShadowSelected($width, $color) {
  box-shadow:
    $width 0 0 0 $color,
    0 $width 0 0 $color,
    $width $width 0 0 $color,
    $width 0 0 0 $color inset,
    0 $width 0 0 $color inset;
}
@mixin boxShadowFocus() {
  box-shadow:
    0 0 0 2px $gray-300;
}
@mixin boxShadowSelectedFocus($width, $color) {
  box-shadow:
    $width 0 0 0 $color,
    0 $width 0 0 $color,
    $width $width 0 0 $color,
    $width 0 0 0 $color inset,
    0 $width 0 0 $color inset,
    0 0 0 1px $gray-300,
    2px 0 0 0 $gray-300,
    0 2px 0 0 $gray-300;
}

:host {
  background-color: transparent;
  border: none;
  outline: none;

  font-family: $mainfont;
  font-size: 14px;

  padding: 0 12px;
  line-height: 32px;
  vertical-align: middle;

  cursor: pointer;
  transition: box-shadow 0.1s;

  &:hover {
    z-index:2;
    position:relative;
  }

  &:focus {
    @include boxShadowFocus();
 }

  &:first-child {
    border-radius: 3px 0 0 3px;
  }

  &:last-child {
    border-radius: 0 3px 3px 0;
  }

  &.dt-button-group-item-disabled {
    pointer-events: none;
    color: $gray-300;
  }
}

// TODO @thomas.pink: Remove this once theming is in place
@function dt-palette($default, $hover, $active, $border, $background) {
  $result: (
    default: $default,
    hover: $hover,
    active: $active,
    border: $border,
    background: $background,
  );
  @return $result;
}
$theme-light: (
  main: dt-palette($turquoise-600, $turquoise-600, $turquoise-700, $gray-300, $gray-100),
  error: dt-palette($red-600, $red-700, $red-800, $gray-300, $gray-100),
  is-dark: false
);
$theme-dark: (
  main: dt-palette(#fff, $turquoise-400, $turquoise-300, #fff, $gray-640),
  error: dt-palette($red-400, $red-500, $red-600, #fff, $gray-640),
  is-dark: true
);

// TODO @thomas.pink: Move this to button theme once theming is in place
@mixin dt-button-group-theme-variants($theme) {
  $palette-names: 'main', 'error';
  $default-palette: 'main';

  @each $name in $palette-names {
    $is-dark: map-get($theme, 'is-dark');
    $palette: map-get($theme, $name);
    $default-color: map-get($palette, 'default');
    $hover-color: map-get($palette, 'hover');
    $active-color: map-get($palette, 'active');
    $background-color: map-get($palette, 'background');
    $border-color: map-get($palette, 'border');

    $namespace: ':host';
    @if $name != $default-palette {
      $namespace: ':host.dt-color-#{$name}';
    }

    & #{$namespace} {
      @include boxShadowSelected(1px, $border-color);
    }

    & #{$namespace}.dt-button-group-item:not(.dt-button-group-item-disabled) {
      color: $default-color;
    }

    & #{$namespace}.dt-button-group-item:hover {
      @include boxShadowSelected(1px, $hover-color);
    }

    & #{$namespace}.dt-button-group-item.dt-button-group-item-selected:focus {
      @include boxShadowSelectedFocus(1px, $active-color);
    }

    & #{$namespace}.dt-button-group-item.dt-button-group-item-selected {
      z-index:1;
      position:relative;
      color: $active-color;

      @include boxShadowSelected(1px, $active-color);
    }

    & #{$namespace}.dt-button-group-item-selected {
      background-color: $background-color;
    }

  }
}

// TODO @thomas.pink: Remove this once theming is in place
@include dt-button-group-theme-variants($theme-light);
.dt-theme-dark {
  @include dt-button-group-theme-variants($theme-dark);
}
